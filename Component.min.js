var e={};function t(e,t=""){if(t||(t=a(e)),s.has(t))return;const n=document.createElement("style");return n.textContent=e,document.head.appendChild(n),s.set(t,n),n}function n(e,t=""){t||(t=a(e));const n=s.get(t);n&&(s.delete(t),n.remove())}function a(e){let t=5381;for(let n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n),t|=0;return t.toString(36)}e.d=(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const s=new Map;function o(e,t=!1,n=100){return new Promise(a=>{let s,o;const r=()=>{if(e.isConnected&&(e._mounted||(e._mounted=!0,e._onMount&&e._onMount()),s||(s=!0,t||a(e)),e.clientWidth||e.clientHeight))return e._rendered||(e._rendered=!0,e._onRender&&e._onRender()),void(o||(o=!0,t&&a(e)));n--?requestAnimationFrame(r):(t&&!o||!t&&!s)&&a(null)};r()})}function r(e,t){const n=new ResizeObserver(n=>{for(const a of n)a.target===e&&t(a)});n.observe(e);const a=new MutationObserver(()=>{e.isConnected||(n.disconnect(),a.disconnect())});a.observe(document.body,{childList:!0,subtree:!0})}class i{constructor(e,t={},n=!1){this.$root=i.makeIn(this,e,t,n)}static make(e,t={},n=!1){if(t instanceof Node)return t;let a="svg"==e||n?document.createElementNS("http://www.w3.org/2000/svg",e??"svg"):document.createElement(e??"div");for(let e of c)a[e]=(...t)=>i[e](a,...t);return i.update(a,t)}static makeIn(e,t,n={},a=!1){return i.make(t,{...n,context:e},a)}static update(e,t){if(Array.isArray(e))return e.map(e=>i.update(e,t));if(!(e instanceof Node)||"object"!=typeof t)return e;const n="context"in t?t.context:i.context,a={el:e,context:n,ctx:n};l.forEach(s=>{s in t&&(e["_"+s]=t[s].bind(n,a))});for(let[e,n]of Object.entries(t))y(a,e,n);return e._onUpdate&&e._onUpdate(),t.also&&t.also.call(n,a),"context"in t&&(i.context=t.context),e}static updateIn(e,t,n){return i.update(t,{...n,context:e})}static mount(e,t,n=!1,a=100){if(e)if(null==t)e.parentNode&&e.parentNode.removeChild(e);else if(e.parentNode!==t&&t.appendChild(e),a)return o(e,n,a);return Promise.resolve(e)}static clear(e,t=!0){if(e)for(;e.firstChild;)t&&i.clear(e.firstChild,!0),i.remove(e.firstChild,!1)}static remove(e,t=!0){e&&(t&&i.clear(e,!0),i.release(e),i.unbind(e),e._onDestroy&&e._onDestroy(),l.forEach(t=>e["_"+t]=null),e.parentNode&&e.parentNode.removeChild(e))}static watchResize=r;static watchMount=o;static replace(e,t){return e&&(e.parentNode&&e.parentNode.replaceChild(t,e),o(t),e.remove()),t}static release(e){e&&e._events&&(e._events.forEach(({ev:t,fn:n,options:a})=>e.removeEventListener(t,n,a)),e._events=[])}static unbind(e){e&&e._unsub&&(e._unsub.forEach(e=>e()),e._unsub=[])}static makeShadow(e,t={},n=""){if(!e||"object"!=typeof t)return null;let a=e instanceof Node?e:document.createElement(e);return a.attachShadow({mode:"open"}),i.update(a.shadowRoot,{context:t.context,children:[{tag:"style",$:"style",text:n},t.child,t.children]}),delete t.child,delete t.children,i.update(a,t)}static makeShadowIn(e,t,n={},a=""){return i.makeShadow(t,{...n,context:e},a)}static setTemplate(e,t,n){i.templates.set(e,(...e)=>i.make(t,n(...e)))}static useTemplate(e,...t){const n=i.templates.get(e);return n?n(...t):null}static templates=new Map;static context;static config=i.update;static configIn=i.updateIn}const c=["update","mount","replace","clear","remove","watchResize","watchMount"],l=["onMount","onRender","onUpdate","onDestroy"],d=new Set(["tag","get","also","context",...l]),u={var:"$",child:"children",child_r:"children_r",text:"textContent",html:"innerHTML",click:"onclick",input:"oninput",change:"onchange",mousewheel:"onmousewheel"},p={push(e,t){t.push(e.el)},$(e,t){e.ctx&&(e.ctx["$"+t]=e.el)},attrs(e,t){m("attrs",e,t,(t,n)=>e.el.setAttribute(t,n),t=>e.el.removeAttribute(t))},data(e,t){m("data",e,t,(t,n)=>e.el.dataset[t]=n,t=>delete e.el.dataset[t])},props(e,t){for(let n in t){let a=_(e,n,null,t[n]);e.el[n]="value"==n&&["number","range"].includes(e.el.type)||["min","max","step"].includes(n)?Number.isFinite(a)?a:0:a??""}},animate(e,t){const{duration:n=300,easing:a="ease",onEnd:s=null,...o}=t;e.el.style.transition=Object.keys(o).map(e=>`${e} ${n}ms ${a}`).join(", "),requestAnimationFrame(()=>{for(let t in o)e.el.style[t]=o[t]}),s&&e.el.addEventListener("transitionend",()=>s.call(e.ctx,e),{once:!0})},events(e,t){for(let n in t){let a=t[n],s={};if("object"==typeof a){for(let e in a)"handler"!=e&&(s[e]=a[e]);a=a.handler}const o=t=>a.call(e.ctx,Object.assign(t,e));(e.el._events??=[]).push({ev:n,fn:o,options:s}),e.el.addEventListener(n,o,s)}},events_r(e,t){i.release(e.el),p.events(e,t)},children(e,t){f(e,t)},children_r(e,t){i.clear(e.el),f(e,t)},style(e,t){h("style",e,t,t=>e.el.style.cssText+=t+";",(t,n)=>e.el.style[t]=n)},style_r(e,t){e.el.style.cssText="",p.style(e,t)},class(e,t){h("class",e,t,t=>t.split(/\s+/).forEach(t=>t&&e.el.classList.add(t)),(t,n)=>n?e.el.classList.add(t):e.el.classList.remove(t))},class_r(e,t){e.el.className="",p.class(e,t)},parent(e,t){i.mount(e.el,t,!1,e.el._onMount||e.el._onRender?100:0)}};function m(e,t,n,a,s){for(let o in n){let r=_(t,e,o,n[o]);null==r?s(o):a(o,String(r))}}function h(e,t,n,a,s){if("string"==typeof n)a(n);else for(let a in n)"_raw"==a?p[e](t,n[a]):s(a,_(t,e,a,n[a]))}function f(e,t){t&&(t instanceof Node?i.mount(t,e.el):t instanceof i?i.mount(t.$root,e.el):Array.isArray(t)?t.forEach(t=>f(e,t)):"string"==typeof t?e.el.insertAdjacentHTML("beforeend",t):"object"==typeof t&&i.make(t.tag,{...t,parent:e.el,context:t.context??e.ctx},e.el instanceof SVGElement))}function _(e,t,n,a){if("function"==typeof a)return a.call(e.ctx,e);if(Array.isArray(a)&&a[0]&&a[0]._state)return a.map(a=>_(e,t,n,a))[0];if(a&&a._state){const s=(s,o)=>{s==a.name&&(o=a.map({...e,name:s,value:o}),y(e,t,n?{[n]:o}:o),e.el._onUpdate&&e.el._onUpdate())};return(e.el._unsub??=[]).push(a._state.subscribe(s)),a.map({...e,name:a.name,value:a._state[a.name]})}return a}function y(e,t,n){if(d.has(t))return;(t=u[t]??t).startsWith("on")?(n={[t.slice(2).toLowerCase()]:n},t="events"):n=_(e,t,null,n);const a=p[t];null!=n&&a?a(e,n):p.props(e,{[t]:n})}class v{static make=(e,t)=>i.make(e,t,!0);static update=(e,t)=>i.update(e,t);static svg=(e={},t={})=>v._make("svg",e,t);static rect=(e,t,n,a,s,o,r={},i={})=>v._make("rect",{...r,x:e,y:t,width:n,height:a,rx:s,ry:o},i);static circle=(e,t,n,a={},s={})=>v._make("circle",{...a,cx:e,cy:t,r:n},s);static line=(e,t,n,a,s={},o={})=>v._make("line",{...s,x1:e,y1:t,x2:n,y2:a},o);static polyline=(e,t={},n={})=>v._make("polyline",{...t,points:e},n);static polygon=(e,t={},n={})=>v._make("polygon",{...t,points:e},n);static path=(e,t={},n={})=>v._make("path",{...t,d:e},n);static text=(e,t,n,a={},s={})=>v._make("text",{...a,x:t,y:n},{...s,text:e});static _make=(e,t={},n={})=>v.make(e,{attrs:{...t},...n});static config=v.update}class x{constructor(e={}){this._data=e,this._subs=new Set;for(const t in e)t in this||Object.defineProperty(this,t,{get:()=>this._data[t],set:e=>{Object.is(this._data[t],e)||(this._data[t]=e,this._subs.forEach(n=>n(t,e)))}})}bind(e,t=e=>e.value){return{_state:this,name:e,map:t}}subscribe(e){return this._subs.add(e),()=>this._subs.delete(e)}}function b(e){return new x(e)}const g=i;export{g as Component,i as EL,v as SVG,x as State,t as addCSS,n as removeCSS,b as useState,o as watchMount,r as watchResize};