var t={};function e(t,e=""){if(e||(e=s(t)),a.has(e))return;const n=document.createElement("style");return n.textContent=t,document.head.appendChild(n),a.set(e,n),n}function n(t,e=""){e||(e=s(t));const n=a.get(e);n&&(a.delete(e),n.remove())}function s(t){let e=5381;for(let n=0;n<t.length;n++)e=(e<<5)+e+t.charCodeAt(n),e|=0;return e.toString(36)}t.d=(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);const a=new Map;function r(t,e=!1,n=100){return new Promise(s=>{let a,r;const o=()=>{if(t.isConnected&&(t._mounted||(t._mounted=!0,t._onMount&&t._onMount()),a||(a=!0,e||s(t)),t.clientWidth||t.clientHeight))return t._rendered||(t._rendered=!0,t._onRender&&t._onRender()),void(r||(r=!0,e&&s(t)));n--?requestAnimationFrame(o):(e&&!r||!e&&!a)&&s(null)};o()})}function o(t,e){const n=new ResizeObserver(n=>{for(const s of n)s.target===t&&e(s)});n.observe(t);const s=new MutationObserver(()=>{t.isConnected||(n.disconnect(),s.disconnect())});s.observe(document.body,{childList:!0,subtree:!0})}class c{constructor(t,e={},n=!1){this.$root=c.make(t,{...e,ctx:this},n)}static make(t,e={},n=!1){t??=e.tag;let s="svg"==t||n?document.createElementNS("http://www.w3.org/2000/svg",t??"svg"):document.createElement(t??"div");c.update(s,e);for(let t of i)s[t]=(...e)=>c[t](s,...e);return s._onResize&&o(s,s._onResize),s}static update(t,e){if(!b.node(t)||!b.obj(e))return t;t.ctx=e.ctx??e.context??t.ctx,l.forEach(n=>{n in e&&(t["_"+n]=e[n].bind(t.ctx,{el:t,ctx:t.ctx}))});for(let[n,s]of Object.entries(e))_(t,n,s);return t._onUpdate&&t._onUpdate(),e.also&&e.also.call(t.ctx,{el:t,ctx:t.ctx}),t}static mount(t,e,n=!1,s=100){if(t)if(null==e)t.parentNode&&t.parentNode.removeChild(t);else if(t.parentNode!==e&&e.appendChild(t),s)return r(t,n,s);return Promise.resolve(t)}static clear(t,e=!0){if(t)for(;t.firstChild;)e&&c.clear(t.firstChild,!0),c.remove(t.firstChild,!1)}static remove(t,e=!0){t&&(e&&c.clear(t,!0),c.release(t),c.unbind(t),t._onDestroy&&t._onDestroy(),l.forEach(e=>t["_"+e]=null),t.parentNode&&t.parentNode.removeChild(t))}static replace(t,e){return t&&(t.parentNode&&t.parentNode.replaceChild(e,t),t.ctx&&(e.ctx=t.ctx),r(e),t.remove()),e}static release(t){t&&t._events&&(t._events.forEach(({ev:e,fn:n,options:s})=>t.removeEventListener(e,n,s)),t._events=[])}static unbind(t){t&&t._unsub&&(t._unsub.forEach(t=>t()),t._unsub=[])}static makeShadow(t,e={},n=""){return t&&b.obj(e)?(b.node(t)||(t=document.createElement(t)),t.attachShadow({mode:"open"}),c.update(t.shadowRoot,{ctx:e.context??e.ctx,children:[{tag:"style",$:"style",text:n},e.children]}),delete e.children,c.update(t,e)):null}static setTemplate(t,e,n){c.templates.set(t,(...t)=>c.make(e,n(...t)))}static useTemplate(t,...e){const n=c.templates.get(t);return n?n(...e):null}static templates=new Map;static config=c.update}const i=["update","mount","clear","remove"],l=["onMount","onRender","onUpdate","onResize","onDestroy"],d=new Set(["tag","get","also","context","ctx",...l]),u={child:"children",child_r:"children_r",text:"textContent",html:"innerHTML"},p={push(t,e){e.push(t)},$(t,e){t.ctx&&(t.ctx["$"+e]=t)},attrs(t,e){m("attrs",t,e,(e,n)=>t.setAttribute(e,n),e=>t.removeAttribute(e))},data(t,e){m("data",t,e,(e,n)=>t.dataset[e]=n,e=>delete t.dataset[e])},props(t,e){for(let n in e){let s=x(t,n,null,e[n]);t[n]="value"==n&&["number","range"].includes(t.type)||["min","max","step"].includes(n)?Number.isFinite(s)?s:0:s??""}},animate(t,e){const{duration:n=300,easing:s="ease",onEnd:a=null,...r}=e;t.style.transition=Object.keys(r).map(t=>`${t} ${n}ms ${s}`).join(", "),a&&t.addEventListener("transitionend",e=>a.call(t.ctx,Object.assign(e,{el:t,ctx:t.ctx})),{once:!0}),requestAnimationFrame(()=>p.style(t,r))},events(t,e){for(let n in e){let s=e[n],a={};if(b.obj(s)&&(a=s,s=s.handler,!s))continue;const r=e=>s.call(t.ctx,Object.assign(e,{el:t,ctx:t.ctx}));(t._events??=[]).push({ev:n,fn:r,options:a}),t.addEventListener(n,r,a)}},events_r(t,e){c.release(t),p.events(t,e)},children(t,e){h(t,e)},children_r(t,e){c.clear(t),h(t,e)},style(t,e){f("style",t,e,e=>t.style.cssText+=e+";",(e,n)=>{n&&Number.isInteger(n)&&(n+="px"),e.startsWith("--")?t.style.setProperty(e,n):t.style[e]=n})},style_r(t,e){t.style.cssText="",p.style(t,e)},class(t,e){f("class",t,e,e=>e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(e,n)=>n?t.classList.add(e):t.classList.remove(e))},class_r(t,e){t.className="",p.class(t,e)},parent(t,e){c.mount(t,e,!1,t._onMount||t._onRender?100:0)}};function m(t,e,n,s,a){for(let r in n){let o=x(e,t,r,n[r]);null==o?a(r):s(r,String(o))}}function f(t,e,n,s,a){if(b.str(n))s(n);else for(let s in n)"_raw"==s?p[t](e,n[s]):a(s,x(e,t,s,n[s]))}function h(t,e){e&&(b.str(e)?t.insertAdjacentHTML("beforeend",e):b.arr(e)?e.forEach(e=>h(t,e)):b.node(e)?c.mount(e,t):e instanceof c?c.mount(e.$root,t):b.obj(e)&&c.make(null,{ctx:t.ctx,...e,parent:t},t instanceof SVGElement))}function x(t,e,n,s){if(b.func(s))return s.call(t.ctx,{el:t,ctx:t.ctx});if(b.arr(s)&&b.state(s[0]))return s.map(s=>x(t,e,n,s))[0];if(b.state(s)){const a=(a,r)=>{a==s.name&&(r=s.map({el:t,ctx:t.ctx,name:a,value:r}),_(t,e,n?{[n]:r}:r),t._onUpdate&&t._onUpdate())};return(t._unsub??=[]).push(s._state.subscribe(a)),s.map({el:t,ctx:t.ctx,name:s.name,value:s._state[s.name]})}return s}function _(t,e,n){if(d.has(e))return;(e=u[e]??e).startsWith("on")?(n={[e.slice(2).toLowerCase()]:n},e="events"):n=x(t,e,null,n);const s=p[e];null!=n&&s?s(t,n):p.props(t,{[e]:n})}const b={func:t=>"function"==typeof t,str:t=>"string"==typeof t,arr:t=>Array.isArray(t),node:t=>t instanceof Node,obj:t=>null!==t&&"object"==typeof t,state:t=>t&&t._state};class v{static svg=(t={},e={})=>({tag:"svg",...e,attrs:t});static rect=(t,e,n,s,a,r,o={},c={})=>({tag:"rect",...c,attrs:{...o,x:t,y:e,width:n,height:s,rx:a,ry:r}});static circle=(t,e,n,s={},a={})=>({tag:"circle",...a,attrs:{...s,cx:t,cy:e,r:n}});static line=(t,e,n,s,a={},r={})=>({tag:"line",...r,attrs:{...a,x1:t,y1:e,x2:n,y2:s}});static polyline=(t,e={},n={})=>({tag:"polyline",...n,attrs:{...e,points:t}});static polygon=(t,e={},n={})=>({tag:"polygon",...n,attrs:{...e,points:t}});static path=(t,e={},n={})=>({tag:"path",...n,attrs:{...e,d:t}});static text=(t,e,n,s={},a={})=>({tag:"text",...a,text:t,attrs:{...s,x:e,y:n}});static make=(t,e)=>c.make(t,e,!0);static update=c.update;static config=c.update}Object.getOwnPropertyNames(v).forEach(t=>v["make_"+t]=(...e)=>v.make(null,v[t](...e)));class y{constructor(t={}){this._data=t,this._subs=new Set;for(const e in t)e in this||Object.defineProperty(this,e,{get:()=>this._data[e],set:t=>{Object.is(this._data[e],t)||(this._data[e]=t,this._subs.forEach(n=>n(e,t)))}})}bind(t,e=t=>t.value){return{_state:this,name:t,map:e}}subscribe(t){return this._subs.add(t),()=>this._subs.delete(t)}}function g(t){return new y(t)}export{c as EL,v as SVG,y as State,e as addCSS,n as removeCSS,g as useState,r as watchMount,o as watchResize};