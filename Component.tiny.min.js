class t{constructor(e,s={},n=!1){this.$root=t.make(e,{...s,ctx:this},n)}static make(e,s={},n=!1){e??=s.tag;let a="svg"==e||s.svg||n?document.createElementNS("http://www.w3.org/2000/svg",e??"svg"):document.createElement(e??"div");return t.update(a,s),a}static update(t,e){if(!l.node(t)||!l.obj(e))return t;t.ctx=e.ctx??e.context??t.ctx;for(let[s,n]of Object.entries(e))i(t,s,n);return e.also?.call(t.ctx,{el:t,ctx:t.ctx}),t}static mount(t,e){null==e?t?.parentNode?.removeChild(t):t?.parentNode!==e&&e.appendChild(t)}static clear(e,s=!0){if(e)for(;e.firstChild;)t.remove(e.firstChild,!1)}static remove(t,e=!0){t&&t.parentNode?.removeChild(t)}static config=t.update}const e=new Set(["tag","get","also","context","ctx","svg"]),s={children:"child",children_r:"child_r",text:"textContent",html:"innerHTML"},n={push(t,e){e.push(t)},$(t,e){t.ctx&&(t.ctx["$"+e]=t)},attrs(t,e){a("attrs",t,e,(e,s)=>t.setAttribute(e,s),e=>t.removeAttribute(e))},data(t,e){a("data",t,e,(e,s)=>t.dataset[e]=s,e=>delete t.dataset[e])},props(t,e){for(let s in e){let n=o(0,0,0,e[s]);t[s]=["min","max","step","selectedIndex"].includes(s)||"value"==s&&["number","range"].includes(t.type)?null==n||""===n||Number.isNaN(n)?"":+n:n??""}},transition(t,e){const{duration:s=300,easing:a="ease",delay:r=0,onEnd:c=null,...o}=e;t.style.transition=Object.keys(o).map(t=>`${t} ${s}ms ${a} ${r}ms`).join(", "),c&&n.events(t,{transitionend:{handler:c,once:!0}}),requestAnimationFrame(()=>n.style(t,o))},events(t,e){for(let s in e){let n=e[s],a={};if(l.obj(n)&&(a=n,n=n.handler,!n))continue;const r=e=>n.call(t.ctx,Object.assign(e,{el:t,ctx:t.ctx}));t.addEventListener(s,r,a)}},events_r(t,e){n.events(t,e)},child(t,e){c(t,e)},child_r(e,s){t.clear(e),n.child(e,s)},style(t,e){r("style",t,e,e=>t.style.cssText+=e+";",(e,s)=>{e.startsWith("--")?t.style.setProperty(e,s):t.style[e]=s})},style_r(t,e){t.style.cssText="",n.style(t,e)},class(t,e){l.arr(e)&&(e=Object.fromEntries(e.filter(Boolean).map(t=>[t,!0]))),r("class",t,e,e=>e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(e,s)=>s?t.classList.add(e):t.classList.remove(e))},class_r(t,e){t.className="",n.class(t,e)},parent(e,s){t.mount(e,s)}};function a(t,e,s,n,a){for(let t in s){let e=o(0,0,0,s[t]);null==e?a(t):n(t,String(e))}}function r(t,e,s,a,r){if(l.str(s))a(s);else for(let a in s)"_raw"==a?n[t](e,s[a]):r(a,o(0,0,0,s[a]))}function c(e,s){s&&(l.str(s)?e.insertAdjacentHTML("beforeend",s):l.arr(s)?s.forEach(t=>c(e,t)):l.node(s)?t.mount(s,e):s instanceof t?t.mount(s.$root,e):l.obj(s)&&t.make(null,{ctx:e.ctx,...s,parent:e},e instanceof SVGElement))}function o(t,e,s,n){return n}function i(t,a,r){if(e.has(a))return;(a=s[a]??a).startsWith("on")&&(r={[a.slice(2).toLowerCase()]:r},a="events");const c=n[a];null!=r&&c?c(t,r):n.props(t,{[a]:r})}const l={func:t=>"function"==typeof t,str:t=>"string"==typeof t,arr:t=>Array.isArray(t),node:t=>t instanceof Node,obj:t=>null!==t&&"object"==typeof t,state:t=>t&&t._state};class d{static svg=(t={},e={})=>({tag:"svg",...e,attrs:t});static rect=(t,e,s,n,a,r,c={},o={})=>({tag:"rect",...o,attrs:{...c,x:t,y:e,width:s,height:n,rx:a,ry:r}});static circle=(t,e,s,n={},a={})=>({tag:"circle",...a,attrs:{...n,cx:t,cy:e,r:s}});static line=(t,e,s,n,a={},r={})=>({tag:"line",...r,attrs:{...a,x1:t,y1:e,x2:s,y2:n}});static polyline=(t,e={},s={})=>({tag:"polyline",...s,attrs:{...e,points:t}});static polygon=(t,e={},s={})=>({tag:"polygon",...s,attrs:{...e,points:t}});static path=(t,e={},s={})=>({tag:"path",...s,attrs:{...e,d:t}});static text=(t,e,s,n={},a={})=>({tag:"text",...a,text:t,attrs:{...n,x:e,y:s}});static make=(e,s)=>t.make(e,s,!0);static update=t.update;static config=t.update}function u(t,e=""){if(e||(e=f(t)),m.has(e))return;const s=document.createElement("style");return s.textContent=t,document.head.appendChild(s),m.set(e,s),s}function p(t,e=""){e||(e=f(t));const s=m.get(e);s&&(m.delete(e),s.remove())}function f(t){let e=5381;for(let s=0;s<t.length;s++)e=(e<<5)+e+t.charCodeAt(s),e|=0;return e.toString(36)}Object.getOwnPropertyNames(d).forEach(t=>d["make_"+t]=(...e)=>d.make(null,d[t](...e)));const m=new Map;export{t as EL,d as SVG,u as addCSS,p as removeCSS};