class t{constructor(e,n={},s=!1){this.$root=t.make(e,{...n,ctx:this},s)}static make(e,n={},s=!1){e??=n.tag;let r="svg"==e||s?document.createElementNS("http://www.w3.org/2000/svg",e??"svg"):document.createElement(e??"div");return t.update(r,n),r}static update(t,e){if(!l.node(t)||!l.obj(e))return t;t.ctx=e.ctx??e.context??t.ctx;for(let[n,s]of Object.entries(e))i(t,n,s);return e.also&&e.also.call(t.ctx,{el:t,ctx:t.ctx}),t}static mount(t,e,n=!1,s=100){return t&&t.parentNode!==e&&e.appendChild(t),Promise.resolve(t)}static clear(e,n=!0){if(e)for(;e.firstChild;)t.remove(e.firstChild,!1)}static remove(t,e=!0){t&&t.parentNode&&t.parentNode.removeChild(t)}static config=t.update}const e=new Set(["tag","get","also","context","ctx"]),n={children:"child",children_r:"child_r",text:"textContent",html:"innerHTML"},s={push(t,e){e.push(t)},$(t,e){t.ctx&&(t.ctx["$"+e]=t)},attrs(t,e){r("attrs",t,e,(e,n)=>t.setAttribute(e,n),e=>t.removeAttribute(e))},data(t,e){r("data",t,e,(e,n)=>t.dataset[e]=n,e=>delete t.dataset[e])},props(t,e){for(let n in e){let s=c(0,0,0,e[n]);t[n]=["min","max","step","selectedIndex"].includes(n)||"value"==n&&["number","range"].includes(t.type)?null==s||""===s||Number.isNaN(s)?"":+s:s??""}},transition(t,e){const{duration:n=300,easing:r="ease",delay:o=0,onEnd:a=null,...c}=e;t.style.transition=Object.keys(c).map(t=>`${t} ${n}ms ${r} ${o}ms`).join(", "),a&&s.events(t,{transitionend:{handler:a,once:!0}}),requestAnimationFrame(()=>s.style(t,c))},events(t,e){for(let n in e){let s=e[n],r={};if(l.obj(s)&&(r=s,s=s.handler,!s))continue;const o=e=>s.call(t.ctx,Object.assign(e,{el:t,ctx:t.ctx}));t.addEventListener(n,o,r)}},events_r(t,e){s.events(t,e)},child(t,e){a(t,e)},child_r(e,n){t.clear(e),a(e,n)},style(t,e){o("style",t,e,e=>t.style.cssText+=e+";",(e,n)=>{e.startsWith("--")?t.style.setProperty(e,n):t.style[e]=n})},style_r(t,e){t.style.cssText="",s.style(t,e)},class(t,e){l.arr(e)&&(e=Object.fromEntries(e.filter(Boolean).map(t=>[t,!0]))),o("class",t,e,e=>e.split(/\s+/).forEach(e=>e&&t.classList.add(e)),(e,n)=>n?t.classList.add(e):t.classList.remove(e))},class_r(t,e){t.className="",s.class(t,e)},parent(e,n){t.mount(e,n,!1,e._onMount||e._onRender?100:0)}};function r(t,e,n,s,r){for(let t in n){let e=c(0,0,0,n[t]);null==e?r(t):s(t,String(e))}}function o(t,e,n,r,o){if(l.str(n))r(n);else for(let r in n)"_raw"==r?s[t](e,n[r]):o(r,c(0,0,0,n[r]))}function a(e,n){n&&(l.str(n)?e.insertAdjacentHTML("beforeend",n):l.arr(n)?n.forEach(t=>a(e,t)):l.node(n)?t.mount(n,e):n instanceof t?t.mount(n.$root,e):l.obj(n)&&t.make(null,{ctx:e.ctx,...n,parent:e},e instanceof SVGElement))}function c(t,e,n,s){return s}function i(t,r,o){if(e.has(r))return;(r=n[r]??r).startsWith("on")&&(o={[r.slice(2).toLowerCase()]:o},r="events");const a=s[r];null!=o&&a?a(t,o):s.props(t,{[r]:o})}const l={func:t=>"function"==typeof t,str:t=>"string"==typeof t,arr:t=>Array.isArray(t),node:t=>t instanceof Node,obj:t=>null!==t&&"object"==typeof t,state:t=>t&&t._state};class d{static svg=(t={},e={})=>({tag:"svg",...e,attrs:t});static rect=(t,e,n,s,r,o,a={},c={})=>({tag:"rect",...c,attrs:{...a,x:t,y:e,width:n,height:s,rx:r,ry:o}});static circle=(t,e,n,s={},r={})=>({tag:"circle",...r,attrs:{...s,cx:t,cy:e,r:n}});static line=(t,e,n,s,r={},o={})=>({tag:"line",...o,attrs:{...r,x1:t,y1:e,x2:n,y2:s}});static polyline=(t,e={},n={})=>({tag:"polyline",...n,attrs:{...e,points:t}});static polygon=(t,e={},n={})=>({tag:"polygon",...n,attrs:{...e,points:t}});static path=(t,e={},n={})=>({tag:"path",...n,attrs:{...e,d:t}});static text=(t,e,n,s={},r={})=>({tag:"text",...r,text:t,attrs:{...s,x:e,y:n}});static make=(e,n)=>t.make(e,n,!0);static update=t.update;static config=t.update}function u(t,e=""){if(e||(e=f(t)),p.has(e))return;const n=document.createElement("style");return n.textContent=t,document.head.appendChild(n),p.set(e,n),n}function m(t,e=""){e||(e=f(t));const n=p.get(e);n&&(p.delete(e),n.remove())}function f(t){let e=5381;for(let n=0;n<t.length;n++)e=(e<<5)+e+t.charCodeAt(n),e|=0;return e.toString(36)}Object.getOwnPropertyNames(d).forEach(t=>d["make_"+t]=(...e)=>d.make(null,d[t](...e)));const p=new Map;function h(t,e=!1,n=100){return new Promise(s=>{let r,o;const a=()=>{if(t.isConnected&&(t._mounted||(t._mounted=!0,t._onMount&&t._onMount()),r||(r=!0,e||s(t)),t.clientWidth||t.clientHeight))return t._rendered||(t._rendered=!0,t._onRender&&t._onRender()),void(o||(o=!0,e&&s(t)));n--?requestAnimationFrame(a):(e&&!o||!e&&!r)&&s(null)};a()})}function x(t,e){const n=new ResizeObserver(n=>{for(const s of n)s.target===t&&e(s)});n.observe(t);const s=new MutationObserver(()=>{t.isConnected||(n.disconnect(),s.disconnect())});s.observe(document.body,{childList:!0,subtree:!0})}export{t as EL,d as SVG,u as addCSS,m as removeCSS,h as watchMount,x as watchResize};